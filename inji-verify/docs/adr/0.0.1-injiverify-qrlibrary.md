# Migration to Html5-QRCode with jsQR and pdfjs-dist for QR Code Scanning and Uploading.

**Date:** 2024-09-02

### Context :
Why the Switch to Html5-QRCode?

Our project originally utilized two libraries: @openhealthnz-credentials/pdf-image-qr-scanner for uploading QR codes (especially from PDFs) and @yudiel/react-qr-scanner for scanning QR codes. However, this setup presented challenges:

- @openhealthnz-credentials/pdf-image-qr-scanner is over 3 years old, no longer maintained, and has low usage, leading to potential security risks and minimal community support. 

- It depends on jsqr and pdfjs-dist, requiring us to wait for updates from the main library for any necessary fixes or improvements.

### Limitations of Html5-QRCode with PDF Files

While Html5-QRCode is effective for general QR code scanning and image uploads, it lacks the capability to decode QR codes embedded in PDF files, a critical requirement for our application.

`Solution:` Utilizing pdfjs-dist and jsqr for PDF QR Code Handling

To overcome this limitation, we integrated pdfjs-dist and jsqr:

- pdfjs-dist: This official PDF rendering library from Mozilla parses PDF files and converts pages into images, enabling jsqr to operate on the image data.

- jsqr: This lightweight QR code decoder scans the image data from pdfjs-dist to extract QR code information, effectively addressing Html5-QRCode's limitation with PDFs.

Advantages of This Approach:
- Enhanced Control: Directly using pdfjs-dist and jsqr allows precise management of PDF QR code processing without relying on outdated libraries.

- Reduced Dependency Issues: By avoiding outdated libraries like @openhealthnz-credentials/pdf-image-qr-scanner, we gain faster access to updates and reduce security risks.

- Improved Maintainability: Managing Html5-QRCode alongside pdfjs-dist and jsqr streamlines maintenance and centralizes QR code handling in modern, well-maintained libraries.

This strategic migration enhances control, reduces dependency issues, and improves the maintainability of our QR code scanning and uploading processes.

### Decision :
Adopt Html5-QRCode for general QR code scanning and uploading, with jsqr and pdfjs-dist specifically for handling QR codes from PDF files.


## People
Owners: Hitesh Jain, Srikanth kola \
Reviewers / team:  Hitesh Jain, Vishwa, Preeti Hongal,Sanchi Singh
 
 